{
  "title": "MongoDB Pitfalls To Avoid",
  "publishedAt": "2022-05-21",
  "summary": "What I learned about MongoDB from refactoring Sevenwiki.",
  "body": {
    "raw": "\n![MongoDB](https://webimages.mongodb.com/_com_assets/cms/kuzt9r42or1fxvlq2-Meta_Generic.png)\n\n> MongoDB apparently can't handle hu-Mongo-us data, due to its design.\n\n_MongoDB. We all know, we all praise. NoSQL! How wonderful is it?_\n\nBut, when you start diving deep in into its complexities (and its documentation), it sort of feels like... lost.\n\nAt first glance, I thought it was such a perfect database --- fast, scalable, and even developer-friendly!\n\nBut alas, after using it for a while, I realized that it wasn't all sunshines and rainbows after all.\nThe trade-offs that I thought were negligible were real, and the database itself became a constraint,\nin a different way as opposed to the usual \"constraint\" of SQL databases.\nBesides, there were a lot of nit-picky skills to learn by trial-and-error.\n\nSo this post is about the common pitfalls you would want to avoid while using MongoDB.\n\nFirst, we have the problem of abusing arrays.\n\n### Arrays\n\n> A backend developer, meeting MongoDB for the first time, being exultant and almost feeling like he found his true love:\n> **Hooray! ðŸ¥³ No more tables and relations and joins and all that stuff! It's even developer-friendly! JSON! ðŸŽ‰ðŸŽ‰**\n\n> The day after service launch:\n> `mongodb: maximum file size exceeded.` ðŸ˜”\n\nWith MongoDB, people started throwing out a bunch of array-focused models, with the rationale of \"Well, It's easier for the devs to code!\"\n\nBut software development isn't for developers. _It's for the users._ (Well, if the users are devs themselves, then it's for the developers, true, but the focus is still on the users.)\n\nUltimately, a new framework's purpose is to satisfy the user's needs better, whether it be through increasing the speed and efficiency of computation, or through enhancing \n\nBut MongoDB uses BSON.\nBSON can only store up to 16MB.\nIf the size exceeds 16MB, which quite commonly occurs for history files, log files, and the like, the database spits out an error.\n\nWhat happens next?\n\nUser input gets ignored, services malfunction, servers crash (when even errors aren't properly handled), ... and **boom**ðŸ’¥!\n\nSo how can we fix this?\n\n#### The easier way (with caveats)\n\nThe lazy developer might say, why don't we just extend the maximum limit from,\nsay, 16MB to 64MB?\n\nAnd, it should \"work,\" thanks to the MongoDB devs who created [GridFS](https://www.mongodb.com/docs/manual/core/gridfs/).\n\nHappily ever after ... or is it?\n\nThe developer will get the same error regardless, when the size of the logs hits the capacity of 64MB.\nNow, there is no GridFS to salvage him from service crashes. Eventually, he has to go through the harder way --- the pain is just delayed a bit.\n\n#### The harder way (that pays you back)\n\nThe more involved and enthusiastic developer would try to refactor the schema from the beginning.\n\nShe separates the arrays, moves each array element into a separate model,\nwhere those models would reference back the original document,\nthrough something like `'parent_id': 'some_ObjectId'`.\n\nSuch refactoring would allow the developer to query elements of that new model\nand retrieve only elements that have the `parent_id` to something.\n\nThis method achieves the same functionality while fixing the original problem, since it would never exceed the limit for most cases.\nEach element is stored in a separate document, so there should be plenty of capacity left.\n\nThe drawback of this approach might be a subtle increase in time complexity. (Perhaps, MongoDB might optimize the call and make the operations faster.)\n\n### Eventual Consistency\n\nThe next possible problem is eventual consistency.\n\nAs a NoSQL database, MongoDB doesn't provide full ACID transaction guarantees by default, but only eventual consistency.\nAlthough it sounds good, in reality, not really.\n\nHere are some issues frequently raised by eventual consistency:\n\n1. Inconsistency during replication: In an eventually consistent system, updates made on one replica may take some time to propagate to other replicas. During this propagation period, different replicas may have different views of the data, leading to temporary inconsistencies. This inconsistency can cause confusion and difficulties in maintaining data integrity.\n2. Complex application logic: Eventual consistency requires application developers to handle conflicts and reconcile data inconsistencies. This complexity arises due to the need to resolve conflicts that can occur when multiple replicas receive conflicting updates or operate on stale data. Implementing the necessary logic to handle conflicts can be challenging and prone to errors.\n3. Read anomalies: Due to the eventual consistency model, read operations might return stale or outdated data if the replica being accessed has not yet received the latest updates. This can result in read anomalies and impact the accuracy and reliability of the application.\n4. Dependency on conflict resolution mechanisms: Resolving conflicts in an eventually consistent system typically relies on conflict resolution mechanisms such as timestamps, versioning, or conflict resolution algorithms. The effectiveness of these mechanisms determines the accuracy and consistency of the final resolved data. Choosing and implementing the right conflict resolution strategy can be complex and critical to maintaining data integrity.\n5. Increased complexity in application development: Developing applications that can handle eventual consistency adds complexity to the development process. Developers need to carefully design their data models, handle conflicts, implement conflict resolution logic, and consider the impact of inconsistent data on application behavior. This complexity can lead to longer development cycles and increased maintenance efforts.\n6. Trade-off between consistency and latency: Eventual consistency prioritizes low latency and availability over strong consistency. While this trade-off can be acceptable for some applications, it may not be suitable for scenarios that require strict consistency guarantees, such as financial transactions or critical data updates.\n7. User perception and usability challenges: Inconsistencies and delays in data propagation can lead to challenges in user perception and experience. Users may encounter situations where data they expect to be updated is still stale or inconsistent across different parts of the system, which can result in confusion and frustration.\n\n### Beware of Data Duplication\n\nDenormalization, a core principle of NoSQL databases, enhances read performance by storing related data together. However, denormalization can lead to data duplication and redundancy if not managed properly.\n\n### Complex Relationships and Limited Joins\n\nNoSQL databases like MongoDB are not designed for complex joins across multiple collections. Designing data models with complex relationships can be challenging, requiring careful consideration of how data will be accessed and queried. Assess the need for complex relationships and consider alternative approaches such as embedding related data or using application-level handling to meet your requirements.\n\n### Migration Issues\n\nMoving data to MongoDB or even between different MongoDB deployments can present migration issues due to differences in schema and data modeling.\n\n### Scalability Challenges\n\nMongoDB's horizontal scalability is one of its key strengths. However, scaling a NoSQL database introduces challenges related to data distribution, consistency, and sharding strategies. One must consider factors such as data partitioning, sharding keys, and monitoring to ensure even resource utilization and optimal performance.",
    "code": "var Component=(()=>{var li=Object.create;var O=Object.defineProperty;var oi=Object.getOwnPropertyDescriptor;var ci=Object.getOwnPropertyNames;var ui=Object.getPrototypeOf,mi=Object.prototype.hasOwnProperty;var z=(c,i)=>()=>(i||c((i={exports:{}}).exports,i),i.exports),fi=(c,i)=>{for(var p in i)O(c,p,{get:i[p],enumerable:!0})},Ne=(c,i,p,y)=>{if(i&&typeof i==\"object\"||typeof i==\"function\")for(let v of ci(i))!mi.call(c,v)&&v!==p&&O(c,v,{get:()=>i[v],enumerable:!(y=oi(i,v))||y.enumerable});return c};var bi=(c,i,p)=>(p=c!=null?li(ui(c)):{},Ne(i||!c||!c.__esModule?O(p,\"default\",{value:c,enumerable:!0}):p,c)),hi=c=>Ne(O({},\"__esModule\",{value:!0}),c);var Pe=z((Ni,xe)=>{xe.exports=React});var we=z(G=>{\"use strict\";(function(){\"use strict\";var c=Pe(),i=Symbol.for(\"react.element\"),p=Symbol.for(\"react.portal\"),y=Symbol.for(\"react.fragment\"),v=Symbol.for(\"react.strict_mode\"),H=Symbol.for(\"react.profiler\"),Q=Symbol.for(\"react.provider\"),X=Symbol.for(\"react.context\"),R=Symbol.for(\"react.forward_ref\"),M=Symbol.for(\"react.suspense\"),A=Symbol.for(\"react.suspense_list\"),T=Symbol.for(\"react.memo\"),I=Symbol.for(\"react.lazy\"),Te=Symbol.for(\"react.offscreen\"),K=Symbol.iterator,ke=\"@@iterator\";function Se(e){if(e===null||typeof e!=\"object\")return null;var n=K&&e[K]||e[ke];return typeof n==\"function\"?n:null}var x=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function f(e){{for(var n=arguments.length,a=new Array(n>1?n-1:0),t=1;t<n;t++)a[t-1]=arguments[t];Ce(\"error\",e,a)}}function Ce(e,n,a){{var t=x.ReactDebugCurrentFrame,l=t.getStackAddendum();l!==\"\"&&(n+=\"%s\",a=a.concat([l]));var o=a.map(function(s){return String(s)});o.unshift(\"Warning: \"+n),Function.prototype.apply.call(console[e],console,o)}}var je=!1,De=!1,Oe=!1,Me=!1,Ae=!1,J;J=Symbol.for(\"react.module.reference\");function Ie(e){return!!(typeof e==\"string\"||typeof e==\"function\"||e===y||e===H||Ae||e===v||e===M||e===A||Me||e===Te||je||De||Oe||typeof e==\"object\"&&e!==null&&(e.$$typeof===I||e.$$typeof===T||e.$$typeof===Q||e.$$typeof===X||e.$$typeof===R||e.$$typeof===J||e.getModuleId!==void 0))}function Fe(e,n,a){var t=e.displayName;if(t)return t;var l=n.displayName||n.name||\"\";return l!==\"\"?a+\"(\"+l+\")\":a}function Z(e){return e.displayName||\"Context\"}function g(e){if(e==null)return null;if(typeof e.tag==\"number\"&&f(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case y:return\"Fragment\";case p:return\"Portal\";case H:return\"Profiler\";case v:return\"StrictMode\";case M:return\"Suspense\";case A:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case X:var n=e;return Z(n)+\".Consumer\";case Q:var a=e;return Z(a._context)+\".Provider\";case R:return Fe(e,e.render,\"ForwardRef\");case T:var t=e.displayName||null;return t!==null?t:g(e.type)||\"Memo\";case I:{var l=e,o=l._payload,s=l._init;try{return g(s(o))}catch{return null}}}return null}var N=Object.assign,E=0,ee,ie,ne,re,ae,te,de;function se(){}se.__reactDisabledLog=!0;function Be(){{if(E===0){ee=console.log,ie=console.info,ne=console.warn,re=console.error,ae=console.group,te=console.groupCollapsed,de=console.groupEnd;var e={configurable:!0,enumerable:!0,value:se,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}E++}}function We(){{if(E--,E===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:N({},e,{value:ee}),info:N({},e,{value:ie}),warn:N({},e,{value:ne}),error:N({},e,{value:re}),group:N({},e,{value:ae}),groupCollapsed:N({},e,{value:te}),groupEnd:N({},e,{value:de})})}E<0&&f(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var F=x.ReactCurrentDispatcher,B;function k(e,n,a){{if(B===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\\n( *(at )?)/);B=t&&t[1]||\"\"}return`\n`+B+e}}var W=!1,S;{var Le=typeof WeakMap==\"function\"?WeakMap:Map;S=new Le}function le(e,n){if(!e||W)return\"\";{var a=S.get(e);if(a!==void 0)return a}var t;W=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var o;o=F.current,F.current=null,Be();try{if(n){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(s,[])}catch(_){t=_}Reflect.construct(e,[],s)}else{try{s.call()}catch(_){t=_}e.call(s.prototype)}}else{try{throw Error()}catch(_){t=_}e()}}catch(_){if(_&&t&&typeof _.stack==\"string\"){for(var d=_.stack.split(`\n`),b=t.stack.split(`\n`),u=d.length-1,m=b.length-1;u>=1&&m>=0&&d[u]!==b[m];)m--;for(;u>=1&&m>=0;u--,m--)if(d[u]!==b[m]){if(u!==1||m!==1)do if(u--,m--,m<0||d[u]!==b[m]){var h=`\n`+d[u].replace(\" at new \",\" at \");return e.displayName&&h.includes(\"<anonymous>\")&&(h=h.replace(\"<anonymous>\",e.displayName)),typeof e==\"function\"&&S.set(e,h),h}while(u>=1&&m>=0);break}}}finally{W=!1,F.current=o,We(),Error.prepareStackTrace=l}var w=e?e.displayName||e.name:\"\",ye=w?k(w):\"\";return typeof e==\"function\"&&S.set(e,ye),ye}function Ye(e,n,a){return le(e,!1)}function $e(e){var n=e.prototype;return!!(n&&n.isReactComponent)}function C(e,n,a){if(e==null)return\"\";if(typeof e==\"function\")return le(e,$e(e));if(typeof e==\"string\")return k(e);switch(e){case M:return k(\"Suspense\");case A:return k(\"SuspenseList\")}if(typeof e==\"object\")switch(e.$$typeof){case R:return Ye(e.render);case T:return C(e.type,n,a);case I:{var t=e,l=t._payload,o=t._init;try{return C(o(l),n,a)}catch{}}}return\"\"}var j=Object.prototype.hasOwnProperty,oe={},ce=x.ReactDebugCurrentFrame;function D(e){if(e){var n=e._owner,a=C(e.type,e._source,n?n.type:null);ce.setExtraStackFrame(a)}else ce.setExtraStackFrame(null)}function qe(e,n,a,t,l){{var o=Function.call.bind(j);for(var s in e)if(o(e,s)){var d=void 0;try{if(typeof e[s]!=\"function\"){var b=Error((t||\"React class\")+\": \"+a+\" type `\"+s+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof e[s]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw b.name=\"Invariant Violation\",b}d=e[s](n,s,t,a,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(u){d=u}d&&!(d instanceof Error)&&(D(l),f(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",t||\"React class\",a,s,typeof d),D(null)),d instanceof Error&&!(d.message in oe)&&(oe[d.message]=!0,D(l),f(\"Failed %s type: %s\",a,d.message),D(null))}}}var Ve=Array.isArray;function L(e){return Ve(e)}function ze(e){{var n=typeof Symbol==\"function\"&&Symbol.toStringTag,a=n&&e[Symbol.toStringTag]||e.constructor.name||\"Object\";return a}}function Ge(e){try{return ue(e),!1}catch{return!0}}function ue(e){return\"\"+e}function me(e){if(Ge(e))return f(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",ze(e)),ue(e)}var U=x.ReactCurrentOwner,He={key:!0,ref:!0,__self:!0,__source:!0},fe,be,Y;Y={};function Qe(e){if(j.call(e,\"ref\")){var n=Object.getOwnPropertyDescriptor(e,\"ref\").get;if(n&&n.isReactWarning)return!1}return e.ref!==void 0}function Xe(e){if(j.call(e,\"key\")){var n=Object.getOwnPropertyDescriptor(e,\"key\").get;if(n&&n.isReactWarning)return!1}return e.key!==void 0}function Ke(e,n){if(typeof e.ref==\"string\"&&U.current&&n&&U.current.stateNode!==n){var a=g(U.current.type);Y[a]||(f('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',g(U.current.type),e.ref),Y[a]=!0)}}function Je(e,n){{var a=function(){fe||(fe=!0,f(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",n))};a.isReactWarning=!0,Object.defineProperty(e,\"key\",{get:a,configurable:!0})}}function Ze(e,n){{var a=function(){be||(be=!0,f(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",n))};a.isReactWarning=!0,Object.defineProperty(e,\"ref\",{get:a,configurable:!0})}}var ei=function(e,n,a,t,l,o,s){var d={$$typeof:i,type:e,key:n,ref:a,props:s,_owner:o};return d._store={},Object.defineProperty(d._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(d,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(d,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:l}),Object.freeze&&(Object.freeze(d.props),Object.freeze(d)),d};function ii(e,n,a,t,l){{var o,s={},d=null,b=null;a!==void 0&&(me(a),d=\"\"+a),Xe(n)&&(me(n.key),d=\"\"+n.key),Qe(n)&&(b=n.ref,Ke(n,l));for(o in n)j.call(n,o)&&!He.hasOwnProperty(o)&&(s[o]=n[o]);if(e&&e.defaultProps){var u=e.defaultProps;for(o in u)s[o]===void 0&&(s[o]=u[o])}if(d||b){var m=typeof e==\"function\"?e.displayName||e.name||\"Unknown\":e;d&&Je(s,m),b&&Ze(s,m)}return ei(e,d,b,l,t,U.current,s)}}var $=x.ReactCurrentOwner,he=x.ReactDebugCurrentFrame;function P(e){if(e){var n=e._owner,a=C(e.type,e._source,n?n.type:null);he.setExtraStackFrame(a)}else he.setExtraStackFrame(null)}var q;q=!1;function V(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===i}function pe(){{if($.current){var e=g($.current.type);if(e)return`\n\nCheck the render method of \\``+e+\"`.\"}return\"\"}}function ni(e){{if(e!==void 0){var n=e.fileName.replace(/^.*[\\\\\\/]/,\"\"),a=e.lineNumber;return`\n\nCheck your code at `+n+\":\"+a+\".\"}return\"\"}}var ge={};function ri(e){{var n=pe();if(!n){var a=typeof e==\"string\"?e:e.displayName||e.name;a&&(n=`\n\nCheck the top-level render call using <`+a+\">.\")}return n}}function _e(e,n){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var a=ri(n);if(ge[a])return;ge[a]=!0;var t=\"\";e&&e._owner&&e._owner!==$.current&&(t=\" It was passed a child from \"+g(e._owner.type)+\".\"),P(e),f('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',a,t),P(null)}}function ve(e,n){{if(typeof e!=\"object\")return;if(L(e))for(var a=0;a<e.length;a++){var t=e[a];V(t)&&_e(t,n)}else if(V(e))e._store&&(e._store.validated=!0);else if(e){var l=Se(e);if(typeof l==\"function\"&&l!==e.entries)for(var o=l.call(e),s;!(s=o.next()).done;)V(s.value)&&_e(s.value,n)}}}function ai(e){{var n=e.type;if(n==null||typeof n==\"string\")return;var a;if(typeof n==\"function\")a=n.propTypes;else if(typeof n==\"object\"&&(n.$$typeof===R||n.$$typeof===T))a=n.propTypes;else return;if(a){var t=g(n);qe(a,e.props,\"prop\",t,e)}else if(n.PropTypes!==void 0&&!q){q=!0;var l=g(n);f(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",l||\"Unknown\")}typeof n.getDefaultProps==\"function\"&&!n.getDefaultProps.isReactClassApproved&&f(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function ti(e){{for(var n=Object.keys(e.props),a=0;a<n.length;a++){var t=n[a];if(t!==\"children\"&&t!==\"key\"){P(e),f(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",t),P(null);break}}e.ref!==null&&(P(e),f(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),P(null))}}function di(e,n,a,t,l,o){{var s=Ie(e);if(!s){var d=\"\";(e===void 0||typeof e==\"object\"&&e!==null&&Object.keys(e).length===0)&&(d+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var b=ni(l);b?d+=b:d+=pe();var u;e===null?u=\"null\":L(e)?u=\"array\":e!==void 0&&e.$$typeof===i?(u=\"<\"+(g(e.type)||\"Unknown\")+\" />\",d=\" Did you accidentally export a JSX literal instead of a component?\"):u=typeof e,f(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",u,d)}var m=ii(e,n,a,l,o);if(m==null)return m;if(s){var h=n.children;if(h!==void 0)if(t)if(L(h)){for(var w=0;w<h.length;w++)ve(h[w],e);Object.freeze&&Object.freeze(h)}else f(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else ve(h,e)}return e===y?ti(m):ai(m),m}}var si=di;G.Fragment=y,G.jsxDEV=si})()});var Ue=z((Pi,Ee)=>{\"use strict\";Ee.exports=we()});var vi={};fi(vi,{default:()=>_i,frontmatter:()=>pi});var r=bi(Ue()),pi={title:\"MongoDB Pitfalls To Avoid\",publishedAt:\"2022-05-21\",summary:\"What I learned about MongoDB from refactoring Sevenwiki.\"};function Re(c){let i=Object.assign({p:\"p\",img:\"img\",blockquote:\"blockquote\",em:\"em\",h3:\"h3\",a:\"a\",span:\"span\",strong:\"strong\",code:\"code\",h4:\"h4\",ol:\"ol\",li:\"li\"},c.components);return(0,r.jsxDEV)(r.Fragment,{children:[(0,r.jsxDEV)(i.p,{children:(0,r.jsxDEV)(i.img,{src:\"https://webimages.mongodb.com/_com_assets/cms/kuzt9r42or1fxvlq2-Meta_Generic.png\",alt:\"MongoDB\",width:\"1200\",height:\"601\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:7,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:7,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.blockquote,{children:[`\n`,(0,r.jsxDEV)(i.p,{children:\"MongoDB apparently can\\u2019t handle hu-Mongo-us data, due to its design.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:9,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:9,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:(0,r.jsxDEV)(i.em,{children:\"MongoDB. We all know, we all praise. NoSQL! How wonderful is it?\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:11,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:11,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"But, when you start diving deep in into its complexities (and its documentation), it sort of feels like\\u2026 lost.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:13,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"At first glance, I thought it was such a perfect database \\u2014 fast, scalable, and even developer-friendly!\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:15,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:`But alas, after using it for a while, I realized that it wasn\\u2019t all sunshines and rainbows after all.\nThe trade-offs that I thought were negligible were real, and the database itself became a constraint,\nin a different way as opposed to the usual \\u201Cconstraint\\u201D of SQL databases.\nBesides, there were a lot of nit-picky skills to learn by trial-and-error.`},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:17,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"So this post is about the common pitfalls you would want to avoid while using MongoDB.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:22,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"First, we have the problem of abusing arrays.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:24,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.h3,{id:\"arrays\",children:[\"Arrays\",(0,r.jsxDEV)(i.a,{className:\"anchor\",href:\"#arrays\",children:(0,r.jsxDEV)(i.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:26,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.blockquote,{children:[`\n`,(0,r.jsxDEV)(i.p,{children:[`A backend developer, meeting MongoDB for the first time, being exultant and almost feeling like he found his true love:\n`,(0,r.jsxDEV)(i.strong,{children:(0,r.jsxDEV)(i.span,{children:[\"Hooray! \",(0,r.jsxDEV)(i.img,{className:\"emoji\",draggable:\"false\",alt:\"\\u{1F973}\",decoding:\"async\",src:\"/static/images/twemoji/svg/1f973.svg\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this),\" No more tables and relations and joins and all that stuff! It\\u2019s even developer-friendly! JSON! \",(0,r.jsxDEV)(i.img,{className:\"emoji\",draggable:\"false\",alt:\"\\u{1F389}\",decoding:\"async\",src:\"/static/images/twemoji/svg/1f389.svg\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this),(0,r.jsxDEV)(i.img,{className:\"emoji\",draggable:\"false\",alt:\"\\u{1F389}\",decoding:\"async\",src:\"/static/images/twemoji/svg/1f389.svg\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:29,columnNumber:3},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:28,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:28,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.blockquote,{children:[`\n`,(0,r.jsxDEV)(i.p,{children:[`The day after service launch:\n`,(0,r.jsxDEV)(i.code,{children:\"mongodb: maximum file size exceeded.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:32,columnNumber:3},this),(0,r.jsxDEV)(i.span,{children:[\" \",(0,r.jsxDEV)(i.img,{className:\"emoji\",draggable:\"false\",alt:\"\\u{1F614}\",decoding:\"async\",src:\"/static/images/twemoji/svg/1f614.svg\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:31,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:31,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"With MongoDB, people started throwing out a bunch of array-focused models, with the rationale of \\u201CWell, It\\u2019s easier for the devs to code!\\u201D\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:34,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:[\"But software development isn\\u2019t for developers. \",(0,r.jsxDEV)(i.em,{children:\"It\\u2019s for the users.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:36,columnNumber:48},this),\" (Well, if the users are devs themselves, then it\\u2019s for the developers, true, but the focus is still on the users.)\"]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:36,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"Ultimately, a new framework\\u2019s purpose is to satisfy the user\\u2019s needs better, whether it be through increasing the speed and efficiency of computation, or through enhancing\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:38,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:`But MongoDB uses BSON.\nBSON can only store up to 16MB.\nIf the size exceeds 16MB, which quite commonly occurs for history files, log files, and the like, the database spits out an error.`},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:40,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"What happens next?\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:44,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:[\"User input gets ignored, services malfunction, servers crash (when even errors aren\\u2019t properly handled), \\u2026 and \",(0,r.jsxDEV)(i.strong,{children:\"boom\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:46,columnNumber:114},this),(0,r.jsxDEV)(i.span,{children:[(0,r.jsxDEV)(i.img,{className:\"emoji\",draggable:\"false\",alt:\"\\u{1F4A5}\",decoding:\"async\",src:\"/static/images/twemoji/svg/1f4a5.svg\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this),\"!\"]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:46,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"So how can we fix this?\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:48,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.h4,{id:\"the-easier-way-with-caveats\",children:[\"The easier way (with caveats)\",(0,r.jsxDEV)(i.a,{className:\"anchor\",href:\"#the-easier-way-with-caveats\",children:(0,r.jsxDEV)(i.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:50,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:`The lazy developer might say, why don\\u2019t we just extend the maximum limit from,\nsay, 16MB to 64MB?`},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:52,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:[\"And, it should \\u201Cwork,\\u201D thanks to the MongoDB devs who created \",(0,r.jsxDEV)(i.a,{href:\"https://www.mongodb.com/docs/manual/core/gridfs/\",children:\"GridFS\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:55,columnNumber:63},this),\".\"]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:55,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"Happily ever after \\u2026 or is it?\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:57,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:`The developer will get the same error regardless, when the size of the logs hits the capacity of 64MB.\nNow, there is no GridFS to salvage him from service crashes. Eventually, he has to go through the harder way \\u2014 the pain is just delayed a bit.`},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:59,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.h4,{id:\"the-harder-way-that-pays-you-back\",children:[\"The harder way (that pays you back)\",(0,r.jsxDEV)(i.a,{className:\"anchor\",href:\"#the-harder-way-that-pays-you-back\",children:(0,r.jsxDEV)(i.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:62,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"The more involved and enthusiastic developer would try to refactor the schema from the beginning.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:64,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:[`She separates the arrays, moves each array element into a separate model,\nwhere those models would reference back the original document,\nthrough something like `,(0,r.jsxDEV)(i.code,{children:\"'parent_id': 'some_ObjectId'\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:68,columnNumber:24},this),\".\"]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:66,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:[`Such refactoring would allow the developer to query elements of that new model\nand retrieve only elements that have the `,(0,r.jsxDEV)(i.code,{children:\"parent_id\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:71,columnNumber:42},this),\" to something.\"]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:70,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:`This method achieves the same functionality while fixing the original problem, since it would never exceed the limit for most cases.\nEach element is stored in a separate document, so there should be plenty of capacity left.`},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:73,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"The drawback of this approach might be a subtle increase in time complexity. (Perhaps, MongoDB might optimize the call and make the operations faster.)\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:76,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.h3,{id:\"eventual-consistency\",children:[\"Eventual Consistency\",(0,r.jsxDEV)(i.a,{className:\"anchor\",href:\"#eventual-consistency\",children:(0,r.jsxDEV)(i.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:78,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"The next possible problem is eventual consistency.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:80,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:`As a NoSQL database, MongoDB doesn\\u2019t provide full ACID transaction guarantees by default, but only eventual consistency.\nAlthough it sounds good, in reality, not really.`},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:82,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"Here are some issues frequently raised by eventual consistency:\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:85,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.ol,{children:[`\n`,(0,r.jsxDEV)(i.li,{children:\"Inconsistency during replication: In an eventually consistent system, updates made on one replica may take some time to propagate to other replicas. During this propagation period, different replicas may have different views of the data, leading to temporary inconsistencies. This inconsistency can cause confusion and difficulties in maintaining data integrity.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:87,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.li,{children:\"Complex application logic: Eventual consistency requires application developers to handle conflicts and reconcile data inconsistencies. This complexity arises due to the need to resolve conflicts that can occur when multiple replicas receive conflicting updates or operate on stale data. Implementing the necessary logic to handle conflicts can be challenging and prone to errors.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:88,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.li,{children:\"Read anomalies: Due to the eventual consistency model, read operations might return stale or outdated data if the replica being accessed has not yet received the latest updates. This can result in read anomalies and impact the accuracy and reliability of the application.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:89,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.li,{children:\"Dependency on conflict resolution mechanisms: Resolving conflicts in an eventually consistent system typically relies on conflict resolution mechanisms such as timestamps, versioning, or conflict resolution algorithms. The effectiveness of these mechanisms determines the accuracy and consistency of the final resolved data. Choosing and implementing the right conflict resolution strategy can be complex and critical to maintaining data integrity.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:90,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.li,{children:\"Increased complexity in application development: Developing applications that can handle eventual consistency adds complexity to the development process. Developers need to carefully design their data models, handle conflicts, implement conflict resolution logic, and consider the impact of inconsistent data on application behavior. This complexity can lead to longer development cycles and increased maintenance efforts.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:91,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.li,{children:\"Trade-off between consistency and latency: Eventual consistency prioritizes low latency and availability over strong consistency. While this trade-off can be acceptable for some applications, it may not be suitable for scenarios that require strict consistency guarantees, such as financial transactions or critical data updates.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:92,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.li,{children:\"User perception and usability challenges: Inconsistencies and delays in data propagation can lead to challenges in user perception and experience. Users may encounter situations where data they expect to be updated is still stale or inconsistent across different parts of the system, which can result in confusion and frustration.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:93,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:87,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.h3,{id:\"beware-of-data-duplication\",children:[\"Beware of Data Duplication\",(0,r.jsxDEV)(i.a,{className:\"anchor\",href:\"#beware-of-data-duplication\",children:(0,r.jsxDEV)(i.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:95,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"Denormalization, a core principle of NoSQL databases, enhances read performance by storing related data together. However, denormalization can lead to data duplication and redundancy if not managed properly.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:97,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.h3,{id:\"complex-relationships-and-limited-joins\",children:[\"Complex Relationships and Limited Joins\",(0,r.jsxDEV)(i.a,{className:\"anchor\",href:\"#complex-relationships-and-limited-joins\",children:(0,r.jsxDEV)(i.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:99,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"NoSQL databases like MongoDB are not designed for complex joins across multiple collections. Designing data models with complex relationships can be challenging, requiring careful consideration of how data will be accessed and queried. Assess the need for complex relationships and consider alternative approaches such as embedding related data or using application-level handling to meet your requirements.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:101,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.h3,{id:\"migration-issues\",children:[\"Migration Issues\",(0,r.jsxDEV)(i.a,{className:\"anchor\",href:\"#migration-issues\",children:(0,r.jsxDEV)(i.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:103,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"Moving data to MongoDB or even between different MongoDB deployments can present migration issues due to differences in schema and data modeling.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:105,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.h3,{id:\"scalability-challenges\",children:[\"Scalability Challenges\",(0,r.jsxDEV)(i.a,{className:\"anchor\",href:\"#scalability-challenges\",children:(0,r.jsxDEV)(i.span,{className:\"icon icon-link\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:107,columnNumber:1},this),`\n`,(0,r.jsxDEV)(i.p,{children:\"MongoDB\\u2019s horizontal scalability is one of its key strengths. However, scaling a NoSQL database introduces challenges related to data distribution, consistency, and sharding strategies. One must consider factors such as data partitioning, sharding keys, and monitoring to ensure even resource utilization and optimal performance.\"},void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:109,columnNumber:1},this)]},void 0,!0,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\",lineNumber:1,columnNumber:1},this)}function gi(c={}){let{wrapper:i}=c.components||{};return i?(0,r.jsxDEV)(i,Object.assign({},c,{children:(0,r.jsxDEV)(Re,c,void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this)}),void 0,!1,{fileName:\"/Users/cliid/Programming/cliid.dev/data/posts/_mdx_bundler_entry_point-c60f71ca-265e-4deb-9fd8-8b7d17129304.mdx\"},this):Re(c)}var _i=gi;return hi(vi);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
  },
  "_id": "posts/mongodb-tips-and-tricks.mdx",
  "_raw": {
    "sourceFilePath": "posts/mongodb-tips-and-tricks.mdx",
    "sourceFileName": "mongodb-tips-and-tricks.mdx",
    "sourceFileDir": "posts",
    "contentType": "mdx",
    "flattenedPath": "posts/mongodb-tips-and-tricks"
  },
  "type": "Post",
  "readingTime": {
    "text": "5 min read",
    "minutes": 4.112727272727272,
    "time": 246764,
    "words": 1131
  },
  "wordCount": 1132,
  "tweetIds": [],
  "slug": "mongodb-tips-and-tricks"
}